CommercialPreProd 10.242.16.0/20

az group create -l westeurope -n CommercialPreProdRG

az network vnet create --resource-group CommercialPreProdRG --name CommercialPreProdVNet --address-prefixes 10.242.16.0/20  --subnet-name CommercialPreProdSubnet  --subnet-prefix 10.242.16.0/24

az ad sp create-for-rbac --output json

  
$VNET_ID=(az network vnet show --resource-group CommercialPreProdRG --name CommercialPreProdVNet --query id -o tsv)
$SUBNET_ID=(az network vnet subnet show --resource-group CommercialPreProdRG --vnet-name CommercialPreProdVNet --name CommercialPreProdSubnet --query id -o tsv)

az role assignment create --assignee "xxxxxxxxxx" --scope $VNET_ID --role Contributor


az aks create --resource-group CommercialPreProdRG --name CommercialPreProd --node-count 2 --generate-ssh-keys --network-plugin kubenet --service-cidr 10.240.0.0/20 --dns-service-ip 10.240.0.10 --pod-cidr 10.241.0.0/16 --docker-bridge-address 172.17.0.1/16 --vnet-subnet-id $SUBNET_ID --service-principal "xxxxxxxxxx" --client-secret "yyyyyyyyyy" --network-policy calico 



az aks get-credentials -g CommercialPreProdRG --name CommercialPreProd

kubectl get nodes